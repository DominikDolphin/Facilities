<!DOCTYPE html>
{{> header}}

    <!-- Site wrapper -->
    <div class="wrapper">
        <!-- Content Wrapper. Contains page content -->
        <div class="">
            <!-- Content Header (Page header) -->
            <section class="">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-8">
                            <h2>Washroom Progress</h2>
                        </div>
                        <div class="col-sm-4">
                            <!--<ol class="breadcrumb float-sm-right">
                              <li class="breadcrumb-item active">Home</li>
                            </ol>
                            -->
                        </div>
                    </div>
                </div><!-- /.container-fluid -->
            </section>

            <!-- Main content -->
            <section class="">
                <div class="container-fluid">
                    <div class="row">

                        {{#waves}}
                        <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 col-12">
                            <div class="card ">
                                <div class="card-header {{^wave}}bg-gradient-success{{/wave}}">
                                    <h3 class="card-title">
                                        {{#wave}}Year {{{wave}}} {{/wave}}
                                        {{^wave}}All years {{/wave}}
                                    </h3>
                                </div><!-- /.card-header -->
                                <div class="card-body">

                                    <canvas id="donutChart{{{id}}}" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                    <div class="ribbon-wrapper ribbon-lg">
                                        <div id="wave{{{id}}}ribbon" class="ribbon">

                                        </div>
                                    </div>
                                    {{#graph}}
                                    <script>
                                        $(function () {
// Do the ribbon
                                        $("#wave{{{reference}}}ribbon").text('{{{percent}}}');
                                        $("#wave{{{reference}}}ribbon").addClass("{{{bgColor}}}");
// Do the rawr
                                        var donutChartCanvas = $('#donutChart{{{reference}}}').get(0).getContext('2d')
                                                var donutData = {
                                                labels: [
                                                        'To Complete (' + {{{toComplete}}} + ')',
                                                        'Completed (' + {{{completed}}} + ')',
                                                        'Scheduled (' + {{{scheduled}}} + ')',
                                                        'Postponed (' + {{{postponed}}} + ')',
                                                        'In Progress (' + {{{inProgress}}} + ')'
                                                        //'Cancelled',
                                                        //'Tentatively Scheduled'
                                                ],
                                                        datasets: [
                                                        {
                                                        data: [
                                                        {{{toComplete}}}, // To Complete
                                                        {{{completed}}}, // Completed
                                                        {{{scheduled}}}, // Scheduled
                                                        {{{postponed}}}, // Deferred
                                                        {{{inProgress}}}, // In Progress
                                                                //, // Cancelled
                                                                //         , // Tentatively Scheduled
                                                        ],
                                                                backgroundColor: [
                                                                        'rgba(210, 214, 222, 1)', // To Completed
                                                                        '#00a65a', // Completed
                                                                        'rgba(60,141,188,0.9)', // Scheduled
                                                                        'rgba(179, 2, 2, 0.8)', // Deferred
                                                                        'rgba(0, 0, 0, 0.8)', // In Progress
                                                                        //'rgba(221, 22, 22, 0.8)', // Tentatively Scheduled
                                                                ],
                                                        }
                                                        ]
                                                }
                                        var donutOptions = {
                                        maintainAspectRatio: false,
                                                legend: {
                                                position: 'bottom',
                                                        align: 'start'
                                                },
                                                responsive: true
                                                }
//Create pie or douhnut chart
// You can switch between pie and douhnut using the method below.
                                        var donutChart = new Chart(donutChartCanvas, {
                                        type: 'doughnut',
                                                data: donutData,
                                                options: donutOptions
                                                })

                                                })

                                    </script>
                                    {{/graph}}
                                    <!-- old -->
                                    <!-- <a href="full-report.php?report=all" class="btn btn-block btn-info" role="button"><i class="far fa-folder-open"></i>&nbsp;More Details</a> -->
                                    <a href="moredetails.php?wave={{{wave}}}" class="btn btn-block btn-info" role="button"><i class="far fa-folder-open"></i>&nbsp;More Details</a>

                                </div><!-- /.card-body -->
                            </div><!-- /.card -->
                        </div> <!-- /.column -->
                        {{/waves}}
                    </div> <!--- /.row -->

                </div> <!-- /.container-fluid -->
            </section>
            <!-- /.content -->

        </div>
        <!-- /.content-wrapper -->
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="AdminLTE/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="AdminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- ChartJS -->
    <script src="AdminLTE/plugins/chart.js/Chart.min.js"></script>
    <!-- AdminLTE App -->
    <script src="AdminLTE/dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="AdminLTE/dist/js/demo.js"></script>

</body>
{{> footer}}